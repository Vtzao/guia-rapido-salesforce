<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Guia Rápido Salesforce</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        /* --- Importação da Fonte e Variáveis Globais --- */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

        :root {
            --primary-color: #fbae3d; /* Dourado Organnact */
            --secondary-color: #e59921; /* Dourado mais escuro para hover */
            --background-color: #f4f7f9;
            --card-background: #ffffff;
            --text-color: #343a40;
            --light-text-color: #6c757d;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            --header-bg: #144371; /* Azul Organnact */
            --error-color: #dc3545;
            --success-color: #28a745;
        }

        /* --- Estilos Base do Corpo da Página --- */
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* --- Estilos da Tela de Login --- */
        #login-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: var(--header-bg);
            background-image: url('img/background.png');
            background-size: cover;
            background-position: center;
        }

        .login-container {
            background-color: var(--card-background);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-sizing: border-box;
        }

        .login-logos {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
        }

        .login-logos img {
            height: 45px;
        }

        .login-container h1 {
            color: var(--header-bg);
            margin-bottom: 25px;
            font-size: 1.8em;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid #ced4da;
            font-size: 1em;
            box-sizing: border-box;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(251, 174, 61, 0.3);
        }

        #login-button, #reset-button {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 8px;
            background-color: var(--primary-color);
            color: white;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #login-button:hover, #reset-button:hover {
            background-color: var(--secondary-color);
        }
        
        #login-message, #reset-message {
            margin-top: 15px;
            font-weight: 500;
            min-height: 20px;
        }

        #login-message { color: var(--error-color); }
        #reset-message.success { color: var(--success-color); }
        #reset-message.error { color: var(--error-color); }

        .form-footer {
            margin-top: 20px;
            font-size: 0.9em;
        }

        .form-footer a {
            color: var(--header-bg);
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
        }

        .form-footer a:hover {
            text-decoration: underline;
        }
        
        /* --- Cabeçalho Principal e Fundo (App Content) --- */
        .header-background {
            background-color: #144271d3;
            background-image: url('img/background.png');
            background-size: cover;
            background-position: center 90%;
            background-blend-mode: overlay;
            height: 280px;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }

        .container {
            max-width: 900px;
            width: 100%;
            padding: 20px;
            position: relative;
            z-index: 1;
            margin: 0 auto;
            box-sizing: border-box;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 10px; /* Ajustado para a barra de logout */
            color: var(--card-background);
        }
        
        .header-top-bar {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            padding: 5px 0;
            gap: 15px;
            color: white;
            margin-bottom: 5px;
            min-height: 38px;
        }

        #user-email {
            font-weight: 500;
            font-size: 0.9em;
        }

        #logout-button {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.5);
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }

        #logout-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .header-logos {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            margin-bottom: 20px;
        }

        .header-logos img {
            height: 60px;
            max-height: 60px;
        }

        header h1 {
            color: var(--card-background);
            font-size: 2.2em;
            margin: 0 0 25px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .search-bar {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-bar .bi-search {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--light-text-color);
            font-size: 1.2em;
        }

        .search-bar input {
            width: 100%;
            padding: 18px 20px 18px 55px;
            border-radius: 50px;
            border: none;
            font-size: 1em;
            box-sizing: border-box;
        }

        .search-bar input::placeholder {
            color: #999;
        }

        main {
            padding-top: 20px;
        }

        .section-title {
            font-size: 1.5em;
            color: var(--text-color);
            margin-bottom: 20px;
        }

        /* --- Grelha de Categorias na Página Inicial --- */
        #home-page .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .category-card {
            background-color: var(--card-background);
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            text-align: left;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .category-card .icon {
            font-size: 2.5em;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .category-card h3 {
            margin: 0 0 10px 0;
            font-size: 1.2em;
            color: var(--text-color);
        }

        .category-card p {
            margin: 0;
            color: var(--light-text-color);
            font-size: 0.9em;
        }

        /* --- Dropdown de Visitas --- */
        .category-dropdown-container {
            position: relative;
            z-index: 10;
        }
        .stacked-card {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
        }
        .stacked-card::before, .stacked-card::after {
            content: "";
            position: absolute;
            z-index: -1;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: var(--card-background);
            border: 1px solid #e9ecef;
            border-radius: 12px;
            transition: transform 0.3s ease;
        }
        .stacked-card::before {
            transform: translate(4px, -4px);
        }
        .stacked-card::after {
            transform: translate(8px, -8px);
        }
        .dropdown-icon {
            font-size: 1.5em;
            color: var(--light-text-color);
            transition: transform 0.3s ease;
        }
        .category-dropdown-container.active .dropdown-icon {
            transform: rotate(180deg);
        }
        .dropdown-content {
            position: absolute;
            top: calc(100% + 5px);
            left: 0;
            width: 100%;
            background-color: var(--card-background);
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid #e9ecef;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out, padding 0.4s ease-in-out, opacity 0.3s;
            opacity: 0;
        }
        .category-dropdown-container.active .dropdown-content {
            max-height: 500px;
            opacity: 1;
        }
        .dropdown-item {
            display: block;
            padding: 15px 25px;
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
            border-top: 1px solid #e9ecef;
        }
        .dropdown-item:first-child {
            border-top: none;
        }
        .dropdown-item:hover {
            background-color: #f8f9fa;
        }

        /* --- Card da Comunidade WhatsApp --- */
        .community-card {
            display: flex;
            align-items: center;
            gap: 20px;
            background-color: var(--primary-color);
            color: var(--card-background);
            border-radius: 12px;
            padding: 25px;
            text-decoration: none;
            transition: background-color 0.2s, transform 0.2s;
            margin-bottom: 40px;
        }
        .community-card:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }
        .community-card .icon {
            font-size: 2.8em;
        }
        .community-card h3 {
            margin: 0;
            font-size: 1.3em;
            font-weight: 500;
        }

        /* --- Estrutura das Páginas de Tutorial --- */
        .tutorial-section {
            display: none; /* Escondido por padrão */
        }

        .tutorial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .tutorial-header h2 {
            color: var(--card-background);
            font-size: 2.2em;
            margin: 0;
        }

        .step-card {
            background-color: var(--card-background);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }

        .step-card h3 {
            color: var(--header-bg);
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
            margin-top: 25px;
            font-size: 1.6em;
        }
        .step-card h3:first-child {
            margin-top: 0;
        }

        /* --- Estilos do F.A.Q. e Dicas --- */
        .faq-item {
            background-color: var(--card-background);
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        .faq-question {
            width: 100%;
            background: none;
            border: none;
            text-align: left;
            padding: 15px 20px;
            font-size: 1.05em;
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
            color: var(--text-color);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
            background-color: #fbfdff;
        }
        .faq-answer p {
            padding: 20px;
            margin: 0;
            line-height: 1.6;
            color: var(--light-text-color);
            border-top: 1px solid #e9ecef;
        }
        .faq-item.active .faq-answer {
            max-height: 200px;
        }
        .faq-icon {
            font-size: 1.5em;
            color: var(--primary-color);
            transition: transform 0.3s ease;
        }
        .faq-item.active .faq-icon {
            transform: rotate(90deg);
        }

        .tip-box {
            background-color: #fff8e1;
            border-left: 4px solid var(--primary-color);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .tip-box p {
            margin: 0;
            color: #59470a;
        }

        /* --- Estilos Gerais de Conteúdo --- */
        .step-card ol, .step-card ul {
            padding-left: 20px;
            font-size: 1.1em;
        }

        .step-card li {
            margin-bottom: 15px;
        }

        .step-card strong {
            color: var(--header-bg);
        }

        .tutorial-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 25px auto 10px auto;
            border: 1px solid #e9ecef;
            display: block;
            cursor: pointer;
        }
        
        .video-container {
            position: relative;
            overflow: hidden;
            width: 100%;
            padding-top: 56.25%;
            margin: 25px auto 10px auto;
            border-radius: 8px;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .image-caption {
            text-align: center;
            font-style: italic;
            color: var(--light-text-color);
            font-size: 0.9em;
            margin-bottom: 25px;
        }

        .back-button {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }

        .back-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        #scrollTopBtn {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 99;
            border: none;
            outline: none;
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
            padding: 15px;
            border-radius: 50%;
            font-size: 18px;
            width: 50px;
            height: 50px;
            box-shadow: var(--shadow);
            transition: background-color 0.3s, opacity 0.3s;
            line-height: 1;
        }

        #scrollTopBtn:hover {
            background-color: var(--secondary-color);
        }

        .coming-soon {
            text-align: center;
            padding: 40px 20px;
            color: var(--light-text-color);
        }
        .coming-soon .icon {
            font-size: 3.5em;
            color: #ced4da;
            margin-bottom: 20px;
        }
        .coming-soon h3 {
            color: var(--text-color);
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .link-button {
            background: none;
            border: none;
            color: var(--primary-color);
            text-decoration: underline;
            cursor: pointer;
            padding: 0;
            font-size: inherit;
            font-family: inherit;
            font-weight: bold;
        }
        .link-button:hover {
            color: var(--secondary-color);
        }

        /* --- Estilos da Pesquisa --- */
        .hidden {
            display: none !important;
        }

        #search-results {
            padding: 20px 0;
        }

        .result-item {
            background-color: var(--card-background);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            border: 1px solid #e9ecef;
        }

        .result-item h3 {
            margin: 0 0 10px 0;
            color: var(--header-bg);
        }

        .result-item p {
            margin: 0 0 15px 0;
            color: var(--light-text-color);
        }
        
        .result-item mark {
            background-color: #fff3cd;
            color: #856404;
            padding: 2px 4px;
            border-radius: 4px;
        }

        .result-item button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .result-item button:hover {
            background-color: var(--secondary-color);
        }

        #no-results-message {
            text-align: center;
            padding: 40px;
            color: var(--light-text-color);
        }

        /* --- Estilos do Lightbox (Zoom de Imagem) --- */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
            box-sizing: border-box;
        }

        .lightbox-image {
            max-width: 90%;
            max-height: 90%;
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }
        
        /* --- Estilos para Telas Menores (Responsividade) --- */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            header h1, .tutorial-header h2 {
                font-size: 1.8em;
            }
            .step-card {
                padding: 20px;
            }
            .step-card h3 {
                font-size: 1.4em;
            }
        }

        @media (max-width: 480px) {
            .login-container {
                padding: 25px;
            }
            .header-background {
                height: 250px;
            }
            header {
                padding-top: 20px;
            }
            header h1, .tutorial-header h2 {
                font-size: 1.6em;
                gap: 10px;
            }
            
            .community-card {
                flex-direction: column;
                text-align: center;
                gap: 15px;
                padding: 20px;
            }

            .community-card h3 {
                font-size: 1.1em;
            }

            .step-card {
                padding: 15px;
            }
            .step-card h3 {
                font-size: 1.3em;
            }
            .step-card ol {
                font-size: 1em;
                padding-left: 18px;
            }
            
            #scrollTopBtn { 
                width: 45px;
                height: 45px;
                bottom: 15px;
                right: 15px; 
                font-size: 16px; 
            }
        }

    </style>
</head>
<body>
    
    <div id="login-page">
        <div class="login-container">
            <div class="login-logos">
                <img src="img/organnact-logo-laranja.png" alt="Logo Organnact" onerror="this.onerror=null;this.src='https://placehold.co/150x40/ffffff/144371?text=Organnact';">
                <img src="img/salesforce-logo.png" alt="Logo Salesforce" onerror="this.onerror=null;this.src='https://placehold.co/150x40/ffffff/144371?text=Salesforce';">
            </div>
            <h1>Acesso ao Guia Rápido</h1>
            <form id="login-form">
                <div class="input-group">
                    <label for="email">E-mail</label>
                    <input type="email" id="email" required>
                </div>
                <div class="input-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" id="login-button">Entrar</button>
                <p id="login-message"></p>
                <div class="form-footer">
                    <a id="forgot-password-link">Esqueci a minha senha</a>
                </div>
            </form>
            <form id="reset-form" class="hidden">
                <div class="input-group">
                    <label for="reset-email">Email para recuperação</label>
                    <input type="email" id="reset-email" required>
                </div>
                <button type="submit" id="reset-button">Enviar email de recuperação</button>
                <p id="reset-message"></p>
                <div class="form-footer">
                    <a id="back-to-login-link">Voltar ao login</a>
                </div>
            </form>
        </div>
    </div>

    <div id="app-content" class="hidden">
        <div class="header-background"></div>
        <div class="container">
            <div id="home-page">
                <header>
                    <div class="header-top-bar">
                        <span id="user-email"></span>
                        <button id="logout-button"><i class="bi bi-box-arrow-right"></i> Sair</button>
                    </div>
                    <div class="header-logos">
                        <img src="img/organnact-logo.png" alt="Logo Organnact" onerror="this.onerror=null;this.src='https://placehold.co/150x40/ffffff/144371?text=Organnact';">
                        <img src="img/salesforce-logo.png" alt="Logo Salesforce" onerror="this.onerror=null;this.src='https://placehold.co/150x40/ffffff/144371?text=Salesforce';">
                    </div>
                    <h1><i class="bi bi-rocket-takeoff-fill"></i> Guia Rápido Salesforce</h1>
                    <div class="search-bar">
                        <i class="bi bi-search"></i>
                        <input type="text" id="search-input" placeholder="Como podemos te ajudar?">
                    </div>
                </header>

                <main>
                    <section>
                        <h2 class="section-title">Categorias</h2>
                        <div class="category-grid">
                            <div class="category-card" data-target="tutorial-contas">
                                <div class="icon"><i class="bi bi-person-vcard"></i></div>
                                <h3>Contas</h3>
                                <p>Aprenda a criar e gerenciar as contas dos seus clientes.</p>
                            </div>
                            <div class="category-card" data-target="tutorial-contatos">
                                <div class="icon"><i class="bi bi-people"></i></div>
                                <h3>Contatos</h3>
                                <p>Saiba como adicionar e organizar os contatos de cada conta.</p>
                            </div>
                            <div class="category-dropdown-container">
                                <div class="category-card stacked-card" id="visitas-trigger">
                                    <div>
                                        <div class="icon"><i class="bi bi-stack"></i></div>
                                        <h3>Visitas Organnact</h3>
                                        <p>Todos os tipos de visitas e registros de atividades.</p>
                                    </div>
                                    <i class="bi bi-chevron-down dropdown-icon"></i>
                                </div>
                                <div class="dropdown-content">
                                    <a class="dropdown-item" data-target="tutorial-visita-propagandista">Tutorial Visitas Organnact</a>
                                    <a class="dropdown-item" data-target="tutorial-visita-dndne">Visita Tipo DN/DNE</a>
                                    <a class="dropdown-item" data-target="tutorial-visita-agd">Visita Tipo AGD</a>
                                    <a class="dropdown-item" data-target="tutorial-visita-acoes">Visita Tipo Ações</a>
                                    <a class="dropdown-item" data-target="tutorial-visita-redes">Visita Tipo Redes</a>
                                    <a class="dropdown-item" data-target="tutorial-visita-training">Visita Tipo Training</a>
                                </div>
                            </div>
                             <div class="category-card" data-target="tutorial-cafe-vet">
                                <div class="icon"><i class="bi bi-cup-hot"></i></div>
                                <h3>Café com VET</h3>
                                <p>Aprenda a registrar eventos de relacionamento com veterinários.</p>
                            </div>
                            <div class="category-card" data-target="tutorial-relatorios">
                                <div class="icon"><i class="bi bi-graph-up"></i></div>
                                <h3>Relatórios</h3>
                                <p>Aprenda a visualizar e entender seus relatórios de desempenho.</p>
                            </div>
                            <div class="category-card" data-target="tutorial-agd">
                                <div class="icon"><i class="bi bi-bullseye"></i></div>
                                <h3>Ação Geradora de Demanda (AGD)</h3>
                                <p>Descubra como registrar e acompanhar as ações que geram novas oportunidades.</p>
                            </div>
                        </div>
                    </section>

                    <section>
                         <a href="https://chat.whatsapp.com/JNmqsmTt7SjC21RghCRIta" target="_blank" class="community-card">
                            <div class="icon"><i class="bi bi-whatsapp"></i></div>
                            <h3>Entrar na Comunidade Salesforce Organnact no Whatsapp</h3>
                        </a>
                    </section>

                    <section>
                        <h2 class="section-title">Perguntas Frequentes</h2>
                        <div class="faq-item">
                            <button class="faq-question">
                                <span>Estou a tentar criar uma conta de Veterinário e dá erro no CRMV. O que faço?</span>
                                <i class="bi bi-chevron-right faq-icon"></i>
                            </button>
                            <div class="faq-answer">
                                <p>Este é um erro comum! O campo <strong>CRMV</strong> precisa de ser preenchido num formato específico: a sigla do estado, um hífen e depois o número. <br><br><strong>Formato correto:</strong> UF-99999<br><strong>Exemplo:</strong> PR-12345</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <button class="faq-question">
                                <span>Não consigo encontrar um cliente na busca. E agora?</span>
                                <i class="bi bi-chevron-right faq-icon"></i>
                            </button>
                            <div class="faq-answer">
                                <p>Tente usar termos de busca diferentes. Procure pelo nome fantasia, razão social ou CNPJ. Se ainda assim não encontrar, verifique se você não tem algum filtro ativo na sua lista de exibição que possa estar ocultando o registro.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <button class="faq-question">
                                <span>Como vejo meu desempenho e meus KPIs?</span>
                                <i class="bi bi-chevron-right faq-icon"></i>
                            </button>
                            <div class="faq-answer">
                                <p>Normalmente, no Salesforce o seu desempenho pode ser visualizado na aba "Relatórios" (Reports), clique em "Todos os Relatórios", pesquise por "Lista KPIs para Conferência". Pronto, ali você terá um relatório dos seus KPIs.</p>
                            </div>
                        </div>
                         <div class="faq-item">
                            <button class="faq-question">
                                <span>O que significa "Lead"?</span>
                                <i class="bi bi-chevron-right faq-icon"></i>
                            </button>
                            <div class="faq-answer">
                                <p>"Lead" é um termo usado para um contato inicial, um potencial cliente que demonstrou algum interesse mas que ainda não foi qualificado. É o primeiríssimo estágio de uma prospecção.</p>
                            </div>
                        </div>
                    </section>
                </main>
            </div>
            
            <div id="search-results" class="hidden"></div>
            
            <div id="tutorial-contas" class="tutorial-section">
            <div class="tutorial-header">
                <h2>Tutorial: Contas</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <h3>📝 Criando uma Nova Conta</h3>
                <p>Manter nossa base de clientes atualizada é fundamental. Veja como é fácil adicionar uma nova conta no sistema.</p>
                <ol>
                    <li>No menu superior, vá para a aba <strong>"Contas"</strong> e clique no botão <strong>"Criar"</strong> no canto superior direito.</li>
                    <li>Uma janela aparecerá para você escolher o <strong>tipo de registro</strong>. Selecione a opção que melhor descreve a conta (PDV, Clínica, etc.) e clique em <strong>Avançar</strong>.</li>
                     <img src="img/tipos-contas.jpg" alt="Tela para selecionar o tipo de registro da nova conta." width="600" class="tutorial-image" onerror="this.onerror=null;this.src='https://placehold.co/800x450/cccccc/ffffff?text=Imagem+Indisponível';">
                     <p class="image-caption">Escolha o tipo de conta que você está criando.</p>
                    <li>Agora, preencha as informações da conta. <strong>Quanto mais detalhes você adicionar, melhor!</strong> Isso ajuda a entender o cliente e a planejar futuras visitas.</li>
                    <li>Depois de salvar, entre na conta que você acabou de criar para adicionar mais informações, como <strong>Endereço de Entrega</strong> e outras observações importantes.</li>
                </ol>
            </section>
            <section class="step-card">
                <h3>Perguntas Frequentes</h3>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>Qual a diferença entre Conta e Contato?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>A <strong>Conta</strong> é a empresa (a clínica, o pet shop, o distribuidor). O <strong>Contato</strong> é a pessoa que trabalha lá (o veterinário, o comprador, o tosador). Todo Contato deve estar dentro de uma Conta.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>Por que é importante preencher o máximo de informações?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Informações detalhadas como melhores horários para visita, potencial de compra e contatos principais nos ajudam a construir um relacionamento mais forte com o cliente e a sermos mais eficientes em nossas visitas e negociações.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>Estou a tentar criar uma conta de Veterinário e dá erro no CRMV. O que faço?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Este é um erro comum! O campo <strong>CRMV</strong> precisa de ser preenchido num formato específico: a sigla do estado, um hífen e depois o número. <br><br><strong>Formato correto:</strong> UF-99999<br><strong>Exemplo:</strong> PR-12345</p>
                        <img src="img/erro-crmv.jpg" alt="Exemplo do erro de formato do CRMV" class="tutorial-image" onerror="this.onerror=null;this.src='https://placehold.co/600x300/cccccc/ffffff?text=Imagem+Indisponível';">
                    </div>
                </div>
            </section>
        </div>

        <div id="tutorial-contatos" class="tutorial-section">
            <div class="tutorial-header">
                <h2>Tutorial: Contatos</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <h3>O que são Contatos?</h3>
                <p>Pense em <strong>Contas</strong> como as empresas (clínicas, pet shops) e em <strong>Contatos</strong> como as pessoas que trabalham lá. Cada veterinário, comprador ou funcionário importante com quem você fala deve ser um contato dentro da conta da empresa.</p>
            </section>
            <section class="step-card">
                <h3>Visualizando seus Contatos</h3>
                <ol>
                    <li>Vá para a aba <strong>"Contatos"</strong>. Por padrão, você verá a lista "Recentes".</li>
                    <li>Para ver todos os contatos da sua região, clique no nome da lista (ex: "Recentes") e selecione <strong>"Todos os Contatos"</strong>.</li>
                </ol>
                <img src="img/contato-lista.png" alt="Tela de Contatos mostrando como alterar a visualização de lista." width="600" class="tutorial-image" onerror="this.onerror=null;this.src='https://placehold.co/800x450/cccccc/ffffff?text=Imagem+Indisponível';">
                <p class="image-caption">Mude o filtro para "Todos os Contatos" para ver a lista completa.</p>
            </section>
            <section class="step-card">
                <h3>Criando um Novo Contato</h3>
                <p>Conheceu alguém novo numa visita? Adicione essa pessoa como um contato para não perder nenhuma informação importante!</p>
                <ol>
                    <li>Na aba "Contatos", clique no botão <strong>"Criar"</strong>.</li>
                    <li>Selecione o país do contato (normalmente "Contato (BR)") e avance.</li>
                    <li>Agora, preencha o MÁXIMO de informações disponíveis. O mais importante é ligar este novo contato a uma conta já existente.
                        <ul>
                            <br>
                            <li><strong>Nome da conta:</strong> Digite o nome da conta de onde é esse contato.<br>
                                <em>Ex: Clínica & Petshop Juquinha's</em>
                            </li>
                            <li><strong>Tratamento</strong> Diga qual é o tipo de tratamento desse contato. <br>
                            <em>Ex: Sr.</em>
                            </li>
                            <li><strong>Nome completo:</strong> Preencha o nome e sobrenome da pessoa. <br>
                            <em>Ex: Pedro Silva</em>
                            </li>
                            <li><strong>Dados para contato:</strong> Adicione o e-mail e telefone.</li>
                            <li><strong>Função e hierarquia:</strong> Indique o cargo da pessoa.<br>
                            <em>Ex: Balconista ou Veterinário.</em>
                            </li>
                        </ul>
                    </li>
                    <li>Clique em <strong>"Salvar"</strong>.</li>
                </ol>
            </section>
            <section class="step-card">
                <h3>Perguntas Frequentes</h3>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>Um veterinário trabalha em duas clínicas. Como eu registro?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Você deve criar o mesmo contato associado às duas contas diferentes. O Salesforce permite essa flexibilidade, mantendo o histórico de relacionamento separado para cada local de trabalho.</p>
                    </div>
                </div>
            </section>
        </div>

        <div id="tutorial-visita-propagandista" class="tutorial-section">
            <div class="tutorial-header">
                <h2>Tutorial: Visitas Organnact</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <h3>Agendando uma Visita</h3>
                <p>Este é o registro padrão para a maioria das suas interações. Use-o para planejar e documentar suas visitas de rotina aos clientes.</p>
                <ol>
                    <li>Acesse <strong>Contas</strong> e pesquise pela Conta que deseja visitar (ex: PDV, Veterinário, Clínica).</li>
                    <li>Clique no botão superior <strong>"⚡Visita Organnact"</strong>.</li>
                    <li>Na janela de criação, marque as caixinhas relacionadas à sua visita (ex: "Propagandista? ✅").</li>
                    <li>Preencha o campo de <strong>Assunto</strong>.</li>
                    <li>Em <strong>Forma de Contato</strong>, informe se será presencial.</li>
                    <li>Defina a <strong>Data / hora de início</strong> e <strong>Data / hora final</strong> para agendar a visita.</li>
                    <li>Deixe o checkbox <strong>"Visita Realizada?"</strong> desmarcado por enquanto, pois estamos apenas agendando.</li>
                    <li>Marque se o <strong>Coordenador Técnico</strong> irá te acompanhar.</li>
                    <li>Clique em <strong>Avançar</strong>. Pronto, sua visita está agendada no seu calendário do Salesforce!</li>
                </ol>
                <h3>Vídeo Tutorial</h3>
                <p>Para assistir o vídeo tutorial de <strong>Visitas Organnact - Como CRIAR/AGENDAR a partir da conta</strong>, basta clicar no botão abaixo.</p>
                <a href="https://escola.organnact.com.br/video/683498ee452ef887a315e08d/689099bab4228951a070ff7d" alt="Assistir ao vídeo tutorial no VídeoHub." title="Assistir ao vídeo tutorial no VídeoHub." target="_blank" class="community-card">
                    <div class="icon"><i class="bi bi-play-btn"></i></div>
                    <h3 style="color: #ffffff; border-bottom:none; align-items:center;" >Tutorial no VídeoHub</h3>
                </a>
                <p class="image-caption">Você será redirecionado(a) para a plataforma VideoHub.</p>
            </section>

            <section class="step-card">
                <h3>Durante a Visita</h3>
                <p>É fundamental registrar as novas pessoas com quem você conversou. Fazer isso na hora garante que nenhuma informação se perca!</p>
                <ol>
                    <li>Na página da Conta que está sendo visitada, vá em <strong>Visão 360 > Contatos Relacionados</strong>.</li>
                    <li>Clique em <strong>Novo Contato</strong> para cadastrar as pessoas com quem conversou. (Atenção: O sistema não deixa cadastrar a mesma pessoa várias vezes!)</li>
                    <li>Na mesma tela, você pode clicar em <strong>Adicionar Relacionamento</strong> para vincular um contato já existente a esta conta.</li>
                </ol>
            </section>

            <section class="step-card">
                <h3>Finalizando a Visita</h3>
                <p>Após o encontro, é hora de finalizar o registro para que ele conste em seus relatórios e conte para seus KPIs.</p>
                <ol>
                    <li>Dentro do módulo <strong>Visitas Organnact</strong>, clique na Visita que deseja finalizar.</li>
                    <li>Clique em <strong>Editar</strong>.</li>
                    <li>Preencha os <strong>Resultados da Visita</strong> e marque o checkbox de <strong>"Visita Realizada?"</strong>.</li>
                    <li>Depois de salvar, volte para a página da Visita e clique em <strong>"Relacionado"</strong>.</li>
                    <li>Em "Pessoas da Visita", clique em <strong>"Criar"</strong> e adicione o nome do contato que você criou ou conversou durante a visita.</li>
                </ol>
                <div class="tip-box">
                    <p>💡 <strong>Dica de Ouro:</strong> Se a conta que você está visitando for do tipo "Veterinário", o sistema é inteligente! Ele já adiciona o nome do próprio veterinário como <strong>Pessoa da Visita</strong> para você. Um passo a menos no seu dia a dia!</p>
                </div>
                 <img src="img/print-visao-360.jpeg" alt="Editando a visita para marcar como realizada" class="tutorial-image" width="400" onerror="this.onerror=null;this.src='https://placehold.co/400x220/cccccc/ffffff?text=Imagem+Indisponível';">
                 <p class="image-caption">Editando a visita para registrar sua conclusão.</p>

                <div class="faq-item" style="background-color: #f8f9fa; margin-top: 20px;">
                    <div class="faq-answer" style="max-height: 200px; background-color: transparent;">
                        <p style="border-top: none;"><strong>Lembrete:</strong> Antes de adicionar "Pessoas da Visita", o contato (ex: balconista, auxiliar, tosador, etc) já deve estar criado e relacionado a esta Conta. Se precisar de ajuda, <button class="link-button" data-target="tutorial-contatos">clique aqui</button> para ver o tutorial de como criar um contato.</p>
                    </div>
                </div>
            </section>
        </div>

        <div id="tutorial-visita-dndne" class="tutorial-section">
            <div class="tutorial-header">
                <h2>Visita Tipo DN/DNE</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <h3>🗓️ Agendando a Visita DN/DNE</h3>
                <p>O processo para agendar uma visita a um Distribuidor (DN/DNE) é muito parecido com o de uma visita de propagandista. A única diferença é o tipo de visita que você vai selecionar.</p>
                <ol>
                    <li>Vá até a <strong>Conta</strong> do distribuidor que você irá visitar.</li>
                    <li>Clique no botão <strong>"⚡Visita Organnact"</strong>.</li>
                    <li>Na janela que abrir, marque a caixinha <strong>"DN/DNE? ✅"</strong>.</li>
                    <li>Preencha os outros campos como <strong>Assunto</strong>, <strong>Data e Hora</strong>, e clique em <strong>Avançar</strong>.</li>
                </ol>
                <p>Pronto! A sua visita ao distribuidor já está agendada no seu calendário.</p>
            </section>
            <section class="step-card">
                <h3>✅ Finalizando e Adicionando Produtos</h3>
                <p>Ao finalizar a visita, o sistema cria automaticamente um <strong>Pedido DN/DNE</strong>. Agora, você precisa adicionar os produtos que foram negociados.</p>
                <ol>
                    <li>Abra a visita que você acabou de realizar.</li>
                    <li>Clique em <strong>Editar</strong> para marcar a visita como <strong>"Realizada"</strong> e preencher os resultados.</li>
                    <li>Após salvar, você verá um campo chamado <strong>"Negociação"</strong> com um número de pedido (ex: PED-00123). <strong>Clique nesse número</strong>.</li>
                     <img src="https://placehold.co/800x250/007bff/ffffff?text=Campo+de+Negociação+com+o+Pedido" alt="Campo de Negociação mostrando o número do Pedido DN/DNE" class="tutorial-image" onerror="this.onerror=null;this.src='https://placehold.co/800x250/cccccc/ffffff?text=Imagem+Indisponível';">
                     <p class="image-caption">Localize o campo "Negociação" e clique no número do pedido.</p>
                    <li>Você será levado para a página do Pedido. Vá até a seção <strong>"Produtos Solicitados"</strong>.</li>
                    <li>Clique em <strong>Adicionar Produtos</strong>, pesquise pelos itens negociados, defina as quantidades e salve.</li>
                </ol>
                <p>Missão cumprida! Sua visita e o pedido correspondente estão registrados corretamente no sistema.</p>
            </section>
             <section class="step-card">
                <h3>Perguntas Frequentes</h3>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>O pedido não foi criado automaticamente. O que eu faço?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Primeiro, confirme se você marcou a caixinha "DN/DNE? ✅" ao criar a visita. Se sim, e mesmo assim o pedido não apareceu, entre em contato com o suporte através da nossa <a href="https://chat.whatsapp.com/JNmqsmTt7SjC21RghCRIta" target="_blank">comunidade no WhatsApp</a> para verificarmos o que aconteceu.</p>
                    </div>
                </div>
            </section>
        </div>

        <div id="tutorial-visita-acoes" class="tutorial-section">
             <div class="tutorial-header">
                <h2>Visita Tipo Ações</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <h3>🗓️ Agendando a Visita de Ações</h3>
                <p>Para registrar uma visita de acompanhamento de ações, como a campanha "Vá de Bike 2.0", o processo de agendamento é o mesmo, mas você deve marcar o tipo de visita correto.</p>
                <ol>
                    <li>Na página da <strong>Conta</strong> que possui a ação, clique em <strong>"⚡Visita Organnact"</strong>.</li>
                    <li>Na janela de criação, marque a caixinha <strong>"Ações? ✅"</strong>.</li>
                    <li>Preencha o <strong>Assunto</strong> e a <strong>Data/Hora</strong> da sua visita e salve.</li>
                </ol>
            </section>
            <section class="step-card">
                <h3>📋 Verificando a Ação no Local</h3>
                <p>Ao chegar no local, seu objetivo é verificar o andamento da campanha. O Salesforce te ajuda com um checklist simples para garantir que nada seja esquecido.</p>
                <ol>
                    <li>Abra o registro da visita que você agendou (ex: VI-000399345).</li>
                    <li>Você verá a seção <strong>"Ações"</strong>, como na imagem abaixo.</li>
                    <li>Marque os checkboxes para confirmar se os <strong>materiais estão bem expostos</strong>, se a <strong>bike está funcionando</strong>, etc.</li>
                    <li>Na seção <strong>"Vendas da Visita"</strong>, você pode registrar os SKUs e valores vendidos durante sua presença no local.</li>
                    <li>Quando terminar, não se esqueça de marcar a visita como <strong>"Realizada"</strong> e clicar em <strong>Salvar</strong>.</li>
                </ol>
                <img src="https://i.imgur.com/K0Yq17j.png" alt="Tela de checklist para a Visita de Ações" class="tutorial-image" onerror="this.onerror=null;this.src='https://placehold.co/800x450/cccccc/ffffff?text=Imagem+Indisponível';">
                <p class="image-caption">Checklist para verificar o andamento da campanha durante a visita.</p>
            </section>
             <section class="step-card">
                <h3>Perguntas Frequentes</h3>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>Preciso adicionar fotos nesta visita?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Sim, é altamente recomendado! Adicionar fotos do "antes e depois" de uma gôndola, da exposição dos materiais ou do evento acontecendo enriquece muito o registro e comprova a execução da ação.</p>
                    </div>
                </div>
                 <div class="faq-item">
                    <button class="faq-question">
                        <span>E se a campanha não estiver ativa na conta que visitei?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Se não houver uma campanha ativa vinculada àquela conta, a seção "Ações" não aparecerá no registro da visita. Ela só é exibida quando necessário para a conta específica.</p>
                    </div>
                </div>
            </section>
        </div>

        <div id="tutorial-visita-redes" class="tutorial-section">
             <div class="tutorial-header">
                <h2>Visita Tipo Redes</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <h3>🗓️ Agendando a Visita de Redes</h3>
                <p>O agendamento de uma visita para uma conta do tipo "Rede" segue o mesmo padrão das outras visitas. A principal diferença está na seleção do tipo correto.</p>
                <ol>
                    <li>Vá até a <strong>Conta</strong> da rede que irá visitar.</li>
                    <li>Clique no botão <strong>"⚡Visita Organnact"</strong>.</li>
                    <li>Na janela de criação, marque a caixinha <strong>"Redes? ✅"</strong>.</li>
                    <li>Preencha o <strong>Assunto</strong>, <strong>Data/Hora</strong> e salve.</li>
                </ol>
            </section>
            <section class="step-card">
                <h3>✍️ Preenchendo a Avaliação da Rede</h3>
                <p>Após agendar a visita, ao abri-la para finalizar, você verá secções especiais para avaliar os treinamentos realizados na rede, tanto para o PDV quanto para os veterinários.</p>
                <ol>
                    <li>Abra o registro da visita que você agendou.</li>
                    <li>Encontre as seções <strong>"Rede PDV"</strong> e <strong>"Rede Veterinário"</strong>.</li>
                    <li>Preencha os campos de <strong>Avaliação</strong> e <strong>Feedback</strong> para cada um. Por exemplo:
                        <ul>
                            <br>
                            <li><strong>Avaliação Treinamento PDV:</strong> <em>Bom</em></li>
                            <li><strong>Feedback Treinamento PDV:</strong> <em>Os integrantes demonstraram muito interesse e tiraram diversas dúvidas durante o treinamento.</em></li>
                            <li><strong>Avaliação Treinamento Veterinário:</strong> <em>Médio</em></li>
                            <li><strong>Feedback Treinamento Veterinário:</strong> <em>O veterinário não apresentou conhecimentos sobre os produtos, porém demonstrou interesse em aprender.</em></li>
                        </ul>
                    </li>
                    <li>Quando terminar, marque a visita como <strong>"Realizada"</strong> e clique em <strong>Salvar</strong>.</li>
                </ol>
                <img src="img/rede-visita.jpg" alt="Tela de preenchimento da avaliação da visita de Redes" class="tutorial-image" onerror="this.onerror=null;this.src='https://placehold.co/800x450/cccccc/ffffff?text=Imagem+Indisponível';">
                <p class="image-caption">Preencha as avaliações e feedbacks dos treinamentos.</p>
            </section>
             <section class="step-card">
                <h3>Perguntas Frequentes</h3>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>Esses campos de avaliação aparecem para todas as visitas?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Não, os campos de "Rede PDV" e "Rede Veterinário" só aparecem quando você marca o checkbox "Redes? ✅" ao criar a visita. O sistema mostra apenas os campos relevantes para cada tipo de visita.</p>
                    </div>
                </div>
            </section>
        </div>

        <div id="tutorial-visita-training" class="tutorial-section">
             <div class="tutorial-header">
                <h2>Visita Tipo Training</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <div class="coming-soon">
                    <div class="icon"><i class="bi bi-tools"></i></div>
                    <h3>Em Breve</h3>
                    <p>Este tutorial está sendo preparado com muito carinho e estará disponível em breve!</p>
                </div>
                 <h3>Perguntas Frequentes</h3>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>Qual a diferença entre "Training" e "Café com VET"?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Um "Training" pode ser mais rápido e focado em um produto específico para uma equipe de vendas, enquanto o "Café com VET" é um evento mais longo, de relacionamento e aprofundamento técnico com veterinários.</p>
                    </div>
                </div>
            </section>
        </div>

        <div id="tutorial-cafe-vet" class="tutorial-section">
             <div class="tutorial-header">
                <h2>Café com VET</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <h3>Clone uma Campanha Existente</h3>
                <p>A maneira mais fácil e rápida de criar sua campanha "Café com VET" é clonando nosso modelo. Isso já traz todas as configurações que você precisa!</p>
                <ol>
                    <li>No menu superior, vá para a aba <strong>"Campanhas"</strong>.</li>
                    <li>Na visualização de lista, selecione o filtro <strong>"Café com VET - Exemplo"</strong> para encontrar o modelo facilmente.</li>
                    <li>Clique no nome da campanha <strong>"Café com VET - Exemplo"</strong> para abri-la.
                        <img src="img/cafe-com-vet-1.jpg" alt="Lista de Campanhas com o modelo 'Café com VET - Exemplo' destacado." class="tutorial-image" width="400" onerror="this.onerror=null;this.src='https://placehold.co/400x150/cccccc/ffffff?text=Imagem+Indisponível';">
                        <p class="image-caption">Localize a campanha modelo para iniciar a clonagem.</p>
                    </li>
                    <li>Dentro da página da campanha, clique na setinha para baixo (▼) no canto superior direito e selecione a opção <strong>"Clonar com relacionado"</strong>.
                        <img src="img/cafe-com-vet-2.jpg" alt="Menu de opções da campanha mostrando a opção 'Clonar com relacionado'." class="tutorial-image" width="400" onerror="this.onerror=null;this.src='https://placehold.co/400x200/cccccc/ffffff?text=Imagem+Indisponível';">
                        <p class="image-caption">Use a opção "Clonar com relacionado" para copiar a campanha.</p>
                    </li>
                    <li>Na tela seguinte, marque a caixinha <strong>"Status do membro da campanha"</strong> e clique em <strong>Avançar</strong>.</li>
                </ol>
            </section>
            <section class="step-card">
                <h3>Personalize sua Campanha</h3>
                <p>Agora é só ajustar os detalhes para que a campanha seja sua!</p>
                <ol>
                    <li>Altere o <strong>Nome da Campanha</strong> para um formato claro, como por exemplo: "Café com VET - Seu Nome / Cidade".</li>
                    <li>Preencha todas as outras informações importantes, como datas, orçamentos e metas.</li>
                    <li>Clique em <strong>Salvar</strong>.</li>
                </ol>
                <p>Prontinho! Sua campanha está criada.</p>
            </section>
            <section class="step-card">
                <h3>Adicionando os Convidados</h3>
                <p>Com a campanha criada, o próximo passo é convidar os veterinários. Você fará isso adicionando as contas deles como membros da campanha.</p>
                <ol>
                    <li>Dentro da sua nova campanha, vá para a aba <strong>"Relacionado"</strong>.</li>
                    <li>Encontre a seção <strong>"Membros da campanha"</strong> e clique no botão <strong>"Adicionar contas"</strong>.</li>
                    <img src="img/adicionando-convidado-cafe.jpg" alt="Botão para adicionar contas como membros da campanha." class="tutorial-image" width="600" onerror="this.onerror=null;this.src='https://placehold.co/400x200/cccccc/ffffff?text=Imagem+Indisponível';">
                    <p class="image-caption">Adicione os veterinários que serão convidados para o evento.</p>
                    <li>Pesquise e selecione as contas dos veterinários que deseja convidar. Se uma conta não existir, você precisará <button class="link-button" data-target="tutorial-contas">criá-la primeiro</button>.</li>
                    <li>Depois de adicionar, você pode clicar em cada membro para atualizar o <strong>Status</strong> dele, como "Convidado", "Confirmado", "Compareceu", etc.</li>
                </ol>
            </section>
             <section class="step-card">
                <h3>📊 Atualizando o Status da Campanha (Muito Importante!)</h3>
                <p>Manter o status da sua campanha atualizado é essencial para a organização e para os relatórios. Pense no status como a "fase" em que o seu evento se encontra. Não se esqueça de o alterar à medida que a campanha avança!</p>
                <p>Para alterar o status, basta entrar na sua campanha e clicar em <strong>Editar</strong>.</p>
                <ul>
                    <li><strong>Planejando:</strong> 🗓️ É a fase inicial. Você está a organizar o local, a data e a lista de convidados.</li>
                    <li><strong>Em Progresso:</strong> 🚀 A campanha está a acontecer! Use este status durante o período do evento.</li>
                    <li><strong>Finalizada:</strong> ✅ O evento já terminou. Este é o passo mais importante! Marcar como "Finalizada" garante que os seus resultados são contabilizados corretamente nos seus KPIs.</li>
                    <li><strong>Abortada:</strong> ❌ Imprevistos acontecem. Se a campanha foi cancelada, use este status.</li>
                </ul>
                <div class="tip-box">
                    <p><strong>Atenção:</strong> Nunca se esqueça de marcar a sua campanha como <strong>Finalizada</strong> assim que ela terminar. É fundamental para que o seu trabalho seja registado nos relatórios!</p>
                </div>
            </section>
            <section class="step-card">
                <h3>Vídeo Tutorial</h3>
                <p>Para assistir o vídeo tutorial de <strong>Campanhas - Como criar um Café com VET (do início ao fim)</strong>, basta clicar no botão abaixo.</p>
                <a href="https://escola.organnact.com.br/video/683498ee452ef887a315e08d/688bbf39c217074a6c061077?t=5" alt="Assistir ao vídeo tutorial no VídeoHub." title="Assistir ao vídeo tutorial no VídeoHub." target="_blank" class="community-card">
                    <div class="icon"><i class="bi bi-play-btn"></i></div>
                    <h3 style="color: #ffffff; border-bottom:none; align-items:center;" >Tutorial no VídeoHub</h3>
                </a>
                <p class="image-caption">Você será redirecionado(a) para a plataforma VideoHub.</p>
            </section>
             <section class="step-card">
                <h3>Perguntas Frequentes</h3>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>Por que registrar como "Evento" e não como "Visita"?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Registrar como "Evento" bloqueia um tempo maior no seu calendário e sinaliza que foi uma interação mais profunda e focada em relacionamento e educação, e não apenas uma visita de propaganda rápida.</p>
                    </div>
                </div>
                 <div class="faq-item">
                    <button class="faq-question">
                        <span>Posso adicionar os veterinários convidados depois?</span>
                        <i class="bi bi-chevron-right faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Sim! Depois de criar a campanha, você pode entrar nela a qualquer momento e ir na seção "Membros da Campanha" para adicionar ou remover os contatos (veterinários) que participarão do evento.</p>
                    </div>
                </div>
            </section>
        </div>
        
        <div id="tutorial-relatorios" class="tutorial-section">
            <div class="tutorial-header">
                <h2>Tutorial: Relatórios</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <h3>Visualizando seus Relatórios</h3>
                <p>Os relatórios são essenciais para acompanhar seu desempenho e os seus KPIs. Veja como é simples aceder a eles.</p>
                <ol>
                    <li>No menu superior, clique na aba <strong>"Relatórios"</strong>.</li>
                    <li>Na página de relatórios, clique em <strong>"Todos os Relatórios"</strong> para ver a lista completa.</li>
                    <li>Use a barra de pesquisa para encontrar o relatório que precisa. Por exemplo, digite <strong>"Lista KPIs para Conferência"</strong> para ver o seu desempenho.</li>
                    <li>Clique no nome do relatório para o abrir e ver todos os detalhes.</li>
                </ol>
            </section>
        </div>

        <div id="tutorial-agd" class="tutorial-section">
            <div class="tutorial-header">
                <h2>Tutorial: Ação Geradora de Demanda (AGD)</h2>
                <button class="back-button"><i class="bi bi-arrow-left"></i> Voltar</button>
            </div>
            <section class="step-card">
                <h3>📝 Criando uma Nova AGD</h3>
                <p>Vamos registrar uma nova Ação Geradora de Demanda para impulsionar os resultados com um veterinário parceiro.</p>
                <ol>
                    <li>Primeiro, vá para a aba <strong>"Contas"</strong> e pesquise pela conta do veterinário onde a AGD será criada.</li>
                    <li>Entre nos detalhes da conta e, na parte superior, clique no botão <strong>"Criar AGD Vet"</strong>.</li>
                    <li>Agora, preencha os campos iniciais da ação:
                        <ul>
                            <br>
                            <li><strong>Tipo de AGD:</strong> Selecione o tipo de campanha. Ex: <em>MEDVEP2026</em>.</li>
                            <li><strong>Motivo da AGD:</strong> Escolha a opção que melhor se encaixa. Ex: <em>Aumento de Giro</em>.</li>
                            <li><strong>Descrição AGD:</strong> Detalhe o que foi combinado com o veterinário. Ex: <em>200 prescrições de produtos da linha saúde intestinal</em>.</li>
                            <li><strong>Data Início AGD</strong> e <strong>Data Fim AGD:</strong> Defina o período da ação.</li>
                        </ul>
                    </li>
                    <li>Clique em <strong>Avançar</strong>. Pronto, sua AGD foi criada com sucesso!</li>
                </ol>
            </section>
            <section class="step-card">
                <h3>👀 Conferindo a AGD Criada</h3>
                <p>Para garantir que tudo foi registrado corretamente, você pode visualizar a AGD dentro da própria conta do cliente.</p>
                <ol>
                    <li>Na página da conta, clique na aba <strong>Visão 360</strong>.</li>
                    <li>Procure pela seção <strong>AGDs</strong>. Ali você encontrará um histórico de todas as ações criadas para aquela conta.</li>
                </ol>
                <img src="img/agd-agd.jpg" width="300" alt="Visualização da lista de AGDs na página da conta" class="tutorial-image" onerror="this.onerror=null;this.src='https://placehold.co/800x300/cccccc/ffffff?text=Imagem+Indisponível';">
                <p class="image-caption">Encontre todas as AGDs registradas na seção "Visão 360".</p>
            </section>
            <section class="step-card">
                <h3>📈 Fazendo o Acompanhamento da AGD</h3>
                <p>Lançar a AGD é só o começo. O acompanhamento periódico é a chave para o sucesso!</p>
                <div class="tip-box">
                    <p>💡 <strong>Dica:</strong> O ideal é fazer o acompanhamento da AGD a cada <strong>15 dias</strong> para manter os dados sempre atualizados.</p>
                </div>
                <ol>
                    <li>Volte para a página da conta e, ao lado do botão "Criar AGD Vet", clique em <strong>"Acompanhamento AGD"</strong>.</li>
                    <li>Selecione a AGD que você acabou de criar (normalmente a mais recente da lista) e clique em <strong>Avançar</strong>.</li>
                    <li>Preencha as informações do período:
                        <ul>
                            <br>
                            <li><strong>Data de Acompanhamento:</strong> Insira a data atual do registro. Ex: <em>01/07/2025</em>.</li>
                            <li><strong>Total de Prescrições:</strong> Informe o número de prescrições realizadas no período. Ex: <em>30</em>.</li>
                        </ul>
                    </li>
                    <li>Clique em <strong>Avançar</strong> para salvar o registro.</li>
                </ol>
            </section>
            <section class="step-card">
                <h3>📊 Visualizando o Histórico de Acompanhamento</h3>
                <p>Todos os seus registros de acompanhamento ficam salvos, criando um histórico claro do desempenho da ação.</p>
                <ol>
                    <li>Navegue novamente para <strong>Visão 360 > AGDs</strong> na página da conta.</li>
                    <li>Clique na AGD que você está acompanhando.</li>
                    <li>Role a página para baixo e você encontrará a seção <strong>"Acompanhamento Ações"</strong>, com todas as informações que você incluiu anteriormente.</li>
                </ol>
                 <img src="img/acompanhamento-agd.jpeg" width="300" alt="Histórico de acompanhamentos da AGD" class="tutorial-image" onerror="this.onerror=null;this.src='https://placehold.co/800x350/cccccc/ffffff?text=Imagem+Indisponível';">
                <p class="image-caption">Acompanhe a evolução da sua AGD através do Acompanhamento de Ações.</p>
            </section>
            <section class="step-card">
                <h3>Vídeo Tutorial AGD</h3>
                <p>Para assistir o vídeo tutorial de <strong>Como Criar uma AGD (Novo método)</strong>, basta clicar no botão abaixo.</p>
                <a href="https://escola.organnact.com.br/video/683498ee452ef887a315e08d/6891157d1609a127e007f5b8?t=6" alt="Assistir ao vídeo tutorial no VídeoHub." title="Assistir ao vídeo tutorial no VídeoHub." target="_blank" class="community-card">
                    <div class="icon"><i class="bi bi-play-btn"></i></div>
                    <h3 style="color: #ffffff; border-bottom:none; align-items:center;" >Tutorial no VídeoHub</h3>
                </a>
                <p class="image-caption">Você será redirecionado(a) para a plataforma VideoHub.</p>
            </section>
        </div>

    </div>
        
        <button id="scrollTopBtn" title="Voltar ao topo"><i class="bi bi-arrow-up"></i></button>

        <div id="lightbox-overlay" class="lightbox-overlay">
            <span id="lightbox-close" class="lightbox-close">&times;</span>
            <img id="lightbox-image" class="lightbox-image" src="" alt="Imagem ampliada">
        </div>
    </div>

    <script type="module">
    // Importar funções do Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

    // =================================================================
    // CONFIGURAÇÃO DO FIREBASE
    // =================================================================
    const firebaseConfig = {
        apiKey: "AIzaSyDX6RKJZ6m7PIJEYErAy79Np0CrCXGYYbs",
        authDomain: "guia-rapido-organnact.firebaseapp.com",
        projectId: "guia-rapido-organnact",
        storageBucket: "guia-rapido-organnact.firebasestorage.app",
        messagingSenderId: "485598244510",
        appId: "1:485598244510:web:4054a6d7c3d703c6ec558f",
        measurementId: "G-9H9SK7LD6N"
    };
    // =================================================================

    // =================================================================
    // CONFIGURAÇÕES DE ACESSO
    // =================================================================
    const DOMINIO_PERMITIDO = 'force.com'; // Domínio para verificar o referrer
    // =================================================================

    // Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Elementos da página
    const loginPage = document.getElementById('login-page');
    const appContent = document.getElementById('app-content');
    const loginForm = document.getElementById('login-form');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const loginMessage = document.getElementById('login-message');
    const logoutButton = document.getElementById('logout-button');
    const userEmailSpan = document.getElementById('user-email');
    const headerTopBar = document.querySelector('.header-top-bar');
    const resetForm = document.getElementById('reset-form');
    const resetEmailInput = document.getElementById('reset-email');
    const resetMessage = document.getElementById('reset-message');
    const forgotPasswordLink = document.getElementById('forgot-password-link');
    const backToLoginLink = document.getElementById('back-to-login-link');


    // --- LÓGICA DE AUTENTICAÇÃO ---
    
    // =========================================================
    // ✨ INÍCIO DA ALTERAÇÃO ✨
    // =========================================================
    const referrer = document.referrer;
    const userAgent = navigator.userAgent;

    // Condições de acesso separadas para maior clareza
    const isFromSalesforceWebsite = referrer && referrer.includes(DOMINIO_PERMITIDO);
    const isFromSalesforceMobile = userAgent && userAgent.includes('SalesforceMobile');

    // Verifica se o usuário veio do site do Salesforce OU do App Mobile
    if (isFromSalesforceWebsite || isFromSalesforceMobile) {
        // Se a condição for verdadeira, libera o acesso direto e esconde a opção de login/logout.
        loginPage.classList.add('hidden');
        appContent.classList.remove('hidden');
        headerTopBar.classList.add('hidden'); // Oculta a barra com email/botão de sair
        initializeTutorials();
    } else {
    // =========================================================
    // ✨ FIM DA ALTERAÇÃO ✨
    // =========================================================
        // Se não veio de uma fonte autorizada, executa o fluxo normal de login com Firebase
        onAuthStateChanged(auth, (user) => {
            if (user) {
                loginPage.classList.add('hidden');
                appContent.classList.remove('hidden');
                if(user.email) {
                    userEmailSpan.textContent = user.email;
                }
                headerTopBar.style.display = 'flex'; // Garante que a barra de logout apareça
                initializeTutorials(); 
            } else {
                loginPage.classList.remove('hidden');
                appContent.classList.add('hidden');
            }
        });

        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = emailInput.value;
            const password = passwordInput.value;
            loginMessage.textContent = '';

            try {
                await signInWithEmailAndPassword(auth, email, password);
            } catch (error) {
                console.error("Erro no login:", error.code);
                switch (error.code) {
                    case 'auth/user-not-found':
                    case 'auth/wrong-password':
                    case 'auth/invalid-credential':
                        loginMessage.textContent = 'Email ou palavra-passe incorretos.';
                        break;
                    default:
                        loginMessage.textContent = 'Ocorreu um erro. Tente novamente.';
                        break;
                }
            }
        });

        if(logoutButton) {
            logoutButton.addEventListener('click', () => {
                signOut(auth).catch((error) => {
                    console.error("Erro ao fazer logoff:", error);
                });
            });
        }

        // Lógica para alternar entre formulários de login e reset
        forgotPasswordLink.addEventListener('click', () => {
            loginForm.classList.add('hidden');
            resetForm.classList.remove('hidden');
        });

        backToLoginLink.addEventListener('click', () => {
            resetForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
        });

        // Lógica para enviar email de recuperação
        resetForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = resetEmailInput.value;
            resetMessage.textContent = '';
            resetMessage.className = '';

            try {
                await sendPasswordResetEmail(auth, email);
                resetMessage.textContent = 'Email de recuperação enviado! Verifique a sua caixa de entrada.';
                resetMessage.classList.add('success');
            } catch (error) {
                console.error("Erro ao recuperar senha:", error.code);
                resetMessage.classList.add('error');
                 switch (error.code) {
                    case 'auth/user-not-found':
                        resetMessage.textContent = 'Este email não está registado.';
                        break;
                    default:
                        resetMessage.textContent = 'Ocorreu um erro. Tente novamente.';
                        break;
                }
            }
        });
    }

    // --- LÓGICA DOS TUTORIAIS (só inicia após login ou acesso direto) ---
    function initializeTutorials() {
        const homePage = document.getElementById('home-page');
        const tutorialSections = document.querySelectorAll('.tutorial-section');
        const categoryCards = document.querySelectorAll('.category-card:not(.stacked-card)');
        const backButtons = document.querySelectorAll('.back-button');
        const scrollTopBtn = document.getElementById('scrollTopBtn');
        const faqQuestions = document.querySelectorAll('.faq-question');
        const linkButtons = document.querySelectorAll('.link-button');
        const visitasDropdownContainer = document.querySelector('.category-dropdown-container');
        const visitasTrigger = document.getElementById('visitas-trigger');
        const dropdownItems = document.querySelectorAll('.dropdown-item');
        const searchInput = document.getElementById('search-input');
        const searchResultsContainer = document.getElementById('search-results');
        const mainContent = document.querySelector('#home-page main');
        const tutorialImages = document.querySelectorAll('.tutorial-image');
        const lightboxOverlay = document.getElementById('lightbox-overlay');
        const lightboxImage = document.getElementById('lightbox-image');
        const lightboxClose = document.getElementById('lightbox-close');

        let searchableContent = [];

        const showSection = (targetId) => {
            homePage.style.display = 'none';
            searchResultsContainer.classList.add('hidden');
            mainContent.style.display = 'block';

            tutorialSections.forEach(section => {
                section.style.display = 'none';
            });
            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.style.display = 'block';
                window.scrollTo(0, 0);
            }
        };

        const showHomePage = () => {
            homePage.style.display = 'block';
            searchResultsContainer.classList.add('hidden');
            mainContent.style.display = 'block';
            tutorialSections.forEach(section => {
                section.style.display = 'none';
            });
            window.scrollTo(0, 0);
        };

        const buildSearchIndex = () => {
            tutorialSections.forEach(section => {
                const titleElement = section.querySelector('h2');
                if (titleElement) {
                    searchableContent.push({
                        id: section.id,
                        title: titleElement.textContent.trim(),
                        content: section.innerText
                    });
                }
            });

            document.querySelectorAll('#home-page .faq-item').forEach((item, index) => {
                const question = item.querySelector('.faq-question span').textContent.trim();
                const answer = item.querySelector('.faq-answer p').textContent.trim();
                searchableContent.push({
                    id: `faq-home-${index}`,
                    title: question,
                    content: `${question} ${answer}`,
                    isFaq: true
                });
            });
        };

        const handleSearch = (event) => {
            const searchTerm = event.target.value.toLowerCase().trim();

            if (searchTerm.length < 3) {
                searchResultsContainer.classList.add('hidden');
                mainContent.style.display = 'block';
                return;
            }

            mainContent.style.display = 'none';
            searchResultsContainer.classList.remove('hidden');
            searchResultsContainer.innerHTML = '';

            const results = searchableContent.filter(item => 
                item.content.toLowerCase().includes(searchTerm)
            );

            if (results.length > 0) {
                results.forEach(result => {
                    const resultElement = document.createElement('div');
                    resultElement.className = 'result-item';

                    const title = document.createElement('h3');
                    title.textContent = result.title;
                    resultElement.appendChild(title);

                    const snippet = document.createElement('p');
                    const contentLower = result.content.toLowerCase();
                    const index = contentLower.indexOf(searchTerm);
                    
                    const start = Math.max(0, index - 100);
                    const end = Math.min(contentLower.length, index + searchTerm.length + 100);
                    
                    let text = result.content.substring(start, end);
                    const regex = new RegExp(searchTerm, 'gi');
                    text = text.replace(regex, (match) => `<mark>${match}</mark>`);

                    snippet.innerHTML = `...${text}...`;
                    resultElement.appendChild(snippet);

                    if (!result.isFaq) {
                        const button = document.createElement('button');
                        button.textContent = 'Ver tutorial';
                        button.dataset.target = result.id;
                        button.addEventListener('click', () => {
                            showSection(result.id);
                            searchInput.value = '';
                        });
                        resultElement.appendChild(button);
                    }
                    
                    searchResultsContainer.appendChild(resultElement);
                });
            } else {
                searchResultsContainer.innerHTML = `<div id="no-results-message"><h3>Nenhum resultado encontrado</h3><p>Tente pesquisar com outros termos.</p></div>`;
            }
        };

        categoryCards.forEach(card => {
            card.addEventListener('click', () => showSection(card.dataset.target));
        });

        if (visitasTrigger) {
            visitasTrigger.addEventListener('click', (event) => {
                event.stopPropagation();
                visitasDropdownContainer.classList.toggle('active');
            });
        }
        
        document.addEventListener('click', (event) => {
            if (visitasDropdownContainer && !visitasDropdownContainer.contains(event.target)) {
                visitasDropdownContainer.classList.remove('active');
            }
        });

        dropdownItems.forEach(item => {
            item.addEventListener('click', (event) => {
                event.stopPropagation();
                showSection(item.dataset.target);
            });
        });

        backButtons.forEach(button => {
            button.addEventListener('click', showHomePage);
        });

        linkButtons.forEach(button => {
            button.addEventListener('click', () => showSection(button.dataset.target));
        });

        const handleScroll = () => {
            if (scrollTopBtn) {
                if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                    scrollTopBtn.style.display = "block";
                } else {
                    scrollTopBtn.style.display = "none";
                }
            }
        };

        window.addEventListener('scroll', handleScroll);

        if (scrollTopBtn) {
            scrollTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        faqQuestions.forEach(button => {
            button.addEventListener('click', () => {
                const item = button.parentElement;
                if (item) {
                    item.classList.toggle('active');
                }
            });
        });

        tutorialImages.forEach(image => {
            image.addEventListener('click', () => {
                lightboxOverlay.style.display = 'flex';
                lightboxImage.src = image.src;
            });
        });

        const closeLightbox = () => {
            lightboxOverlay.style.display = 'none';
        };

        lightboxClose.addEventListener('click', closeLightbox);
        lightboxOverlay.addEventListener('click', (event) => {
            if (event.target === lightboxOverlay) {
                closeLightbox();
            }
        });

        buildSearchIndex();
        searchInput.addEventListener('input', handleSearch);
    }
</script>
</body>
</html>